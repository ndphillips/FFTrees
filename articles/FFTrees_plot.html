<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Visualising FFTs • FFTrees</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Visualising FFTs">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">FFTrees</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/FFTrees_accuracy_statistics.html">Accuracy statistics in FFTrees</a></li>
    <li><a class="dropdown-item" href="../articles/FFTrees_examples.html">Examples of FFTrees</a></li>
    <li><a class="dropdown-item" href="../articles/FFTrees_function.html">Creating FFTs with FFTrees()</a></li>
    <li><a class="dropdown-item" href="../articles/FFTrees_heart.html">Tutorial: Creating FFTs for heart disease</a></li>
    <li><a class="dropdown-item" href="../articles/FFTrees_mytree.html">Manually specifying FFTs</a></li>
    <li><a class="dropdown-item" href="../articles/FFTrees_plot.html">Visualising FFTs</a></li>
    <li><a class="dropdown-item" href="../articles/guide.html">Overview: Creating FFTs with FFTrees</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ndphillips/FFTrees/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Visualising FFTs</h1>
                        <h4 data-toc-skip class="author">Nathaniel
Phillips and Hansjörg Neth</h4>
            
            <h4 data-toc-skip class="date">2025-09-02</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ndphillips/FFTrees/blob/master/vignettes/FFTrees_plot.Rmd" class="external-link"><code>vignettes/FFTrees_plot.Rmd</code></a></small>
      <div class="d-none name"><code>FFTrees_plot.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="visualizing-fftrees">Visualizing FFTrees<a class="anchor" aria-label="anchor" href="#visualizing-fftrees"></a>
</h2>
<p>The <strong>FFTrees</strong> package makes it very easy to visualize
and evaluate fast-and-frugal trees (FFTs):</p>
<ul>
<li><p>Use the main <code><a href="../reference/FFTrees.html">FFTrees()</a></code> function to create a set of
FFTs (e.g., as an R object <code>x</code> of type
<code>FFTrees</code>).</p></li>
<li><p>Visualize a tree in <code>x</code> by evaluating
<code>plot(x)</code>.</p></li>
</ul>
<!-- Blank line. --><p>The two key arguments for plotting are <code>what</code> and
<code>tree</code>: Whereas the <code>tree</code> argument allows
selecting between different trees in <code>x</code> (using
<code>tree = 1</code> by default), the <code>what</code> argument
distinguishes between five main types of plots:</p>
<ol style="list-style-type: decimal">
<li><p><code>plot(x, what = 'all')</code> visualizes a tree and
corresponding performance statistics. This is also the default when
evaluating <code>plot(x)</code>.</p></li>
<li><p><code>plot(x, what = 'tree')</code> visualizes only the tree
diagram of the selected tree (without performance statistics).</p></li>
<li><p><code>plot(x, what = 'icontree')</code> visualizes the tree
diagram of the selected tree with icon arrays on exit nodes (with
additional options for <code>show.iconguide</code> and
<code>n.per.icon</code>.</p></li>
<li><p><code>plot(x, what = 'cues')</code> visualizes the current cue
accuracies in ROC space (by calling the <code><a href="../reference/showcues.html">showcues()</a></code>
function).</p></li>
<li><p><code>plot(x, what = 'roc')</code> visualizes a performance
comparison of FFTs and competing algorithms in ROC space.</p></li>
</ol>
<p>The other arguments of the <code><a href="../reference/plot.FFTrees.html">plot.FFTrees()</a></code> function allow
further customization of the plot (e.g., by defining labels and
parameters, or selectively hiding or showing elements).</p>
<p>In the following, we illustrate both ways by creating FFTs based on
the <code>titanic</code> data (included in the <strong>FFTrees</strong>
package).</p>
<div class="section level3">
<h3 id="the-titanic-data">The Titanic data<a class="anchor" aria-label="anchor" href="#the-titanic-data"></a>
</h3>
<p><img src="titanic.jpg" width="50%" style="display: block; margin: auto;"></p>
<p>The <code>titanic</code> dataset contains basic survival statistics
of <em>Titanic</em> passengers. For each passenger, we know in which
class s/he traveled, as well as binary categories specifying age, sex,
and survival information. To get a first impression, we inspect a random
sample of cases:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">12</span><span class="op">)</span>  <span class="co"># reproducible randomness</span></span>
<span><span class="va">rcases</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">titanic</span><span class="op">)</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Sample of data:</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">titanic</span><span class="op">[</span><span class="va">rcases</span>, <span class="op">]</span>, caption <span class="op">=</span> <span class="st">"A sample of 10 observations from the `titanic` data."</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>A sample of 10 observations from the <code>titanic</code>
data.</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="left">class</th>
<th align="left">age</th>
<th align="left">sex</th>
<th align="left">survived</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">82</td>
<td align="left">first</td>
<td align="left">adult</td>
<td align="left">male</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="left">91</td>
<td align="left">first</td>
<td align="left">adult</td>
<td align="left">male</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="left">336</td>
<td align="left">second</td>
<td align="left">adult</td>
<td align="left">male</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">346</td>
<td align="left">second</td>
<td align="left">adult</td>
<td align="left">male</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="left">450</td>
<td align="left">second</td>
<td align="left">adult</td>
<td align="left">male</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="left">546</td>
<td align="left">second</td>
<td align="left">adult</td>
<td align="left">female</td>
<td align="left">TRUE</td>
</tr>
<tr class="odd">
<td align="left">1093</td>
<td align="left">third</td>
<td align="left">adult</td>
<td align="left">female</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">1160</td>
<td align="left">third</td>
<td align="left">adult</td>
<td align="left">female</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="left">1271</td>
<td align="left">third</td>
<td align="left">child</td>
<td align="left">male</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="left">1500</td>
<td align="left">crew</td>
<td align="left">adult</td>
<td align="left">male</td>
<td align="left">TRUE</td>
</tr>
</tbody>
</table>
<p>Our current goal is to fit FFTs to this dataset. This essentially
asks:</p>
<ul>
<li>Can we use the information in the cues <code>class</code>,
<code>age</code> and <code>sex</code> to decide whether a passenger
<code>survived</code>?</li>
</ul>
<p>First, let’s create an <code>FFTrees</code> object (called
<code>titanic.fft</code>) from the <code>titanic</code> dataset:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create FFTs for the titanic data:</span></span>
<span><span class="va">titanic.fft</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/FFTrees.html">FFTrees</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="va">survived</span> <span class="op">~</span><span class="va">.</span>,</span>
<span>                       data <span class="op">=</span> <span class="va">titanic</span>, </span>
<span>                       main <span class="op">=</span> <span class="st">"Surviving the Titanic"</span>,</span>
<span>                       decision.labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Died"</span>, <span class="st">"Survived"</span><span class="op">)</span><span class="op">)</span>       </span></code></pre></div>
<!-- Goal: Fitting, rather than prediction -->
<p>Note that we used the entire <code>titanic</code> data (i.e., all
2201 cases) to train <code>titanic.fft</code>, rather than specifying
<code>train.p</code> to set aside some proportion of it or specifying a
dedicated <code>data.test</code> set for predictive purposes. This
implies that our present goal is <em>to fit</em> FFTs to the historic
data, rather than on create and use FFTs <em>to predict</em> new
cases.</p>
</div>
<div class="section level3">
<h3 id="visualising-cue-accuracies">Visualising cue accuracies<a class="anchor" aria-label="anchor" href="#visualising-cue-accuracies"></a>
</h3>
<p>We can visualize individual cue accuracies (specifically their
sensitivities and specificities) by including the
<code>what = 'cues'</code> argument within the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>
function. Let’s apply the function to the <code>titanic.fft</code>
object to see how accurate each of the cues were on their own in
predicting survival:</p>
<!-- Example what = 'cues': -->
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">titanic.fft</span>, what <span class="op">=</span> <span class="st">"cues"</span>, main <span class="op">=</span> <span class="st">"Cues predicting Titanic survival"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #585858;">Plotting cue training statistics:</span></span></span>
<span><span class="co"><span style="color: #585858;">#&gt; </span><span style="color: #767676;">— Cue accuracies ranked by bacc</span></span></span>
<span><span class="co"><span style="color: #767676;">#&gt; </span></span></span></code></pre>
<div class="figure" style="text-align: center">
<img src="FFTrees_plot_files/figure-html/titanic-cues-1.png" alt="**Figure 1**: Cue accuracies of FFTs predicting survival in the `titanic` dataset." width="500px"><p class="caption">
<strong>Figure 1</strong>: Cue accuracies of FFTs predicting survival in
the <code>titanic</code> dataset.
</p>
</div>
<p>Given the axes of this plot, good performing cues should be near the
top left corner of the graph (i.e., exhibit both a low false alarm rate
and a high hit rate). For the <code>titanic</code> data, this implies
that <em>none</em> of the cues predicts very well on its own. The best
individual cue appears to be <code>sex</code> (indicated as 1), followed
by <code>class</code> (2). By contrast, <code>age</code> (3) seems a
pretty poor cue for predicting survival on its own (despite its
specificity of 97%).</p>
<p>Inspecting cue accuracies can provide valuable information for
constructing FFTs. While they provide lower bounds on the performance of
trees (as combining cues is only worthwhile when this yields a benefit),
even poor individual cues can shine in combination with other
predictors.</p>
</div>
<div class="section level3">
<h3 id="visualizing-ffts-and-their-performance">Visualizing FFTs and their performance<a class="anchor" aria-label="anchor" href="#visualizing-ffts-and-their-performance"></a>
</h3>
<p>To visualize the tree from an <code>FFTrees</code> object, use
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>. Let’s plot one of the trees (Tree #1, i.e., the
best one, given our current goal):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">titanic.fft</span>, tree <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="FFTrees_plot_files/figure-html/titanic-plot-1.png" alt="**Figure 2**: Plotting the best FFT of an `FFTrees` object." width="75%"><p class="caption">
<strong>Figure 2</strong>: Plotting the best FFT of an
<code>FFTrees</code> object.
</p>
</div>
<p>The resulting plot visualizes one out of
<code>r</code>titanic.fft<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mi>r</mi><mi>e</mi><mi>e</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">trees</annotation></semantics></math>n<code>\ possible trees in the</code>titanic.fft<code>object.  As</code>tree
=
1<code>corresponds to the best tree given our current</code>goal<code>for selecting FFTs, we could have plotted the same tree by specifying</code>tree
= ‘best.train’`.</p>
<p>As <strong>Figure 2</strong> contains a lot of information in three
distinct panels, let’s briefly consider their contents:</p>
<ol style="list-style-type: decimal">
<li><p><em>Basic dataset information</em>: The top row of the plot shows
basic information on the current dataset: Its population size (N) and
the baseline frequencies of the two categories of the criterion
variable.</p></li>
<li>
<p><em>FFT and classification performance</em>: The middle row shows
the tree (in the center) as well as how many cases (here: persons) were
classified at each level in the tree (on either side). For example, the
current tree (Tree #1 of 4) can be understood as:</p>
<ul>
<li>If a person is female, decide that they survived.</li>
<li>Otherwise, if a person is neither in first nor in second class,
decide that they died.</li>
<li>Finally, if the person is a child, predict they survived, otherwise
decide that they died.</li>
</ul>
</li>
<li><p><em>Accuracy and performance information</em>: The bottom row
shows general performance statistics of the FFT:<br>
As our models in <code>titanic.fft</code> were trained on the entire
<code>titanic</code> dataset, we fitted FFTs to its 2201 cases, rather
than setting aside some data for predictive purposes. The panel label
reflects this important distinction:</p></li>
</ol>
<ul>
<li><p>If the results of fitting data (i.e., data used to build the
tree) are displayed, we’ll see a “Training” label.</p></li>
<li><p>If a testing dataset separate from the one used to build the tree
is used, we’ll see a “Prediction” label.</p></li>
</ul>
<p>The bottom panel provides performance information and is structured
into three subpanels:</p>
<ol style="list-style-type: lower-alpha">
<li><p>The classification table (on the left) shows the relationship
between the true criterion states (as columns) and predicted decisions
(as rows). The abbreviations <em>hi</em> (hits) and <em>cr</em> (Correct
rejections) denote correct decisions; <em>mi</em> (misses) and
<em>fa</em> (false-alarms) denote incorrect decisions.</p></li>
<li><p>A range of vertical levels (in the middle) show the tree’s
cumulative performance in terms of two frugality measures
(<code>mcu</code> and <code>pci</code>) and various accuracy measures
(sensitivity, specificity, accuracy, and balanced accuracy (see <a href="FFTrees_accuracy_statistics.html">Accuracy statistics</a> for
details).</p></li>
<li><p>Finally, the plot (on the right) shows an ROC curve comparing the
performance of all trees in the <code>FFTrees</code> object.
Additionally, the performance of logistic regression (blue) and CART
(red) are shown. The tree plotted in the middle panel is highlighted in
a solid green color (i.e., Figure 2 shows Tree #1).</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="additional-arguments">Additional arguments<a class="anchor" aria-label="anchor" href="#additional-arguments"></a>
</h3>
<p>Specifying additional arguments of <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> changes what
and how various elements are being displayed.</p>
<ul>
<li>
<p><code>what</code> should be visualized? The <code>what</code>
argument selects contents to be plotted:</p>
<ul>
<li><p>When <code>what = 'all'</code> (as by default), the plot shows
both a tree diagram and a range of corresponding performance statistics.
Using one of the other <code>what</code> options narrows the range of
what is being shown:</p></li>
<li><p>To only visualize a bare tree diagram (without performance
statistics), we specify <code>what = "tree"</code> (formerly
<code>stats = FALSE</code>).</p></li>
<li><p>To visualize the tree diagram with icon arrays on exit nodes, we
specify <code>what = "icontree"</code> (with additional options for
<code>show.iconguide</code> and <code>n.per.icon</code>).</p></li>
<li><p>To visualize the performance comparison (for different FFTs and
competing algorithms) in ROC space, we specify
<code>what = "roc"</code>.</p></li>
</ul>
</li>
</ul>
<!-- Examples: --><p>The following examples illustrate the wide range of corresponding
plots:</p>
<!-- Example what = 'icontree': -->
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot tree diagram with icon arrays:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">titanic.fft</span>, what <span class="op">=</span> <span class="st">"icontree"</span>, </span>
<span>     n.per.icon <span class="op">=</span> <span class="fl">50</span>, show.iconguide <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="FFTrees_plot_files/figure-html/titanic-what-tree-1.png" alt="**Figure 3**: An FFT diagram with icon arrays on exit nodes." width="550px"><p class="caption">
<strong>Figure 3</strong>: An FFT diagram with icon arrays on exit
nodes.
</p>
</div>
<!-- Example what = 'roc': -->
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot only the performance comparison in ROC space:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">titanic.fft</span>, what <span class="op">=</span> <span class="st">"roc"</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="FFTrees_plot_files/figure-html/titanic-what-roc-1.png" alt="**Figure 4**: Performance comparison of FFTs in ROC space." width="550px"><p class="caption">
<strong>Figure 4</strong>: Performance comparison of FFTs in ROC space.
</p>
</div>
<ul>
<li>When the main options for <code>what</code> do not suffice, various
<code>show.</code> arguments (i.e., <code>show.header</code>,
<code>show.tree</code>, <code>show.confusion</code>,
<code>show.levels</code>, <code>show.roc</code>,
<code>show.icons</code>, and <code>show.iconguide</code>) allow to
selectively turn on or turn off specific elements of the overall plot.
For example:</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Hide some elements of the FFT plot: </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">titanic.fft</span>, </span>
<span>     show.icons <span class="op">=</span> <span class="cn">FALSE</span>,     <span class="co"># hide icons</span></span>
<span>     show.iconguide <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co"># hide icon guide</span></span>
<span>     show.header <span class="op">=</span> <span class="cn">FALSE</span>     <span class="co"># hide header</span></span>
<span>     <span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="FFTrees_plot_files/figure-html/titanic-args-1.png" alt="**Figure 5**: Plotting selected elements." width="550px"><p class="caption">
<strong>Figure 5</strong>: Plotting selected elements.
</p>
</div>
<ul>
<li><p><code>tree</code>: Which tree do we want to plot? As
<code>FFTrees</code> objects typically contain multiple FFTs, we need to
indicate which tree we want to visualize. We usually specify the tree to
show by an integer value, such as <code>tree = 2</code>, which will plot
the corresponding tree (i.e., Tree #2) of the <code>FFTrees</code>
object. Alternatively, we can specify <code>tree = "best.train"</code>
or <code>tree = "best.test"</code> to visualize the best training or
prediction tree, respectively. This selects and shows the tree with the
highest goal value (e.g., weighted accuracy <code>wacc</code>) when
fitting or testing data.</p></li>
<li><p><code>data</code>: Which data do we want to apply the tree to? We
can specify <code>data = "train"</code> or <code>data = "test"</code> to
distinguish between a training and testing dataset (if available) in the
<code>FFTrees</code> object. As not all <code>FFTrees</code> objects
contain test data, <code>data</code> is set to
<code>data = "train"</code> by default.</p></li>
</ul>
<!-- Note on consistency of data and tree: --><p>As the <code>data</code> and <code>tree</code> arguments can both
refer to datasets used for training or fitting (i.e., the “train” or
“test” sets), they should be specified consistently. For instance, the
following command would visualize the best training tree in
<code>titanic.fft</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">titanic.fft</span>, tree <span class="op">=</span> <span class="st">"best.train"</span><span class="op">)</span></span></code></pre></div>
<p>as <code>data = "train"</code> by default. However, the following
analog expression would fail:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">titanic.fft</span>, tree <span class="op">=</span> <span class="st">"best.test"</span><span class="op">)</span></span></code></pre></div>
<p>for two distinct reasons:</p>
<ol style="list-style-type: decimal">
<li><p>When <code>data</code> remains unspecified, its default is
<code>data = "train"</code>. Thus, asking for
<code>tree = "best.test"</code> would require switching to
<code>data = "test"</code>.</p></li>
<li><p>More crucially, <code>titanic.fft</code> was created without any
test data. Hence, asking for the best test tree does not make sense —
which is why <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> will show the best training tree (with
a warning).</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="plotting-performance-for-new-data">Plotting performance for new data<a class="anchor" aria-label="anchor" href="#plotting-performance-for-new-data"></a>
</h3>
<p>Shifting our emphasis from fitting to prediction, we primarily need
to specify some test data that was not used to train the
<code>FFTrees</code> object.
<!-- ToDo: Applying an existing FFTrees object to new data (in plot) does not seem to work: -->
When predicting performance for a new dataset (e.g.;
<code>data = test.data</code>), the plotting and printing functions will
automatically apply an existing <code>FFTrees</code> object to the new
data and compute corresponding performance statistics (using the
<code><a href="../reference/fftrees_apply.html">fftrees_apply()</a></code> function). However, when applying existing
FFTs to new data, the changes to the <code>FFTrees</code> object are not
stored in the input object, unless the (invisible) output of
<code><a href="../reference/plot.FFTrees.html">plot.FFTrees()</a></code> or <code><a href="../reference/print.FFTrees.html">print.FFTrees()</a></code> is
re-assigned to that object. The best way to fit FFTs to training data
and evaluate them to test data is to explicitly include both datasets in
the original <code><a href="../reference/FFTrees.html">FFTrees()</a></code> command by either using its
<code>data.test</code> or its <code>train.p</code> argument.</p>
<!-- Example: Using test data (for prediction, rather than fitting): -->
<p>For example, we can repeat the previous analysis, but now let’s
create separate training and test datasets by including the
<code>train.p = .50</code> argument. This will split the dataset into a
50% training set, and a distinct 50% testing set. (Alternatively, we
could specify a dedicated test data set by using the
<code>data.test</code> argument.)</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>  <span class="co"># for replicability of the training/test split</span></span>
<span><span class="va">titanic.pred.fft</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/FFTrees.html">FFTrees</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="va">survived</span> <span class="op">~</span><span class="va">.</span>,</span>
<span>                            data <span class="op">=</span> <span class="va">titanic</span>,</span>
<span>                            train.p <span class="op">=</span> <span class="fl">.50</span>,  <span class="co"># use 50% to train, 50% to test</span></span>
<span>                            main <span class="op">=</span> <span class="st">"Titanic"</span>, </span>
<span>                            decision.labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Died"</span>, <span class="st">"Survived"</span><span class="op">)</span></span>
<span>                            <span class="op">)</span></span></code></pre></div>
<p>Here is the best training tree applied to the <em>training</em>
data:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print(titanic.pred.fft, tree = 1)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">titanic.pred.fft</span>, tree <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="FFTrees_plot_files/figure-html/titanic-train-1.png" alt="**Figure 6**: Plotting the best FFT on _training_ data." width="580px"><p class="caption">
<strong>Figure 6</strong>: Plotting the best FFT on <em>training</em>
data.
</p>
</div>
<p>Tree #1 is the best training tree — and could also be visualized by
<code>plot(titanic.pred.fft, tree = "best.train")</code>. This tree has
a high specificity of 92%, but a much lower sensitivity of just 51%. The
overall accuracy of the tree’s classifications is at 79%, which exceeds
the baseline, but is far from perfect. However, as we can see in the
ROC table, a logistic regression (LR) would not perform much better, and
CART performed even worse than Tree #1.</p>
<p>Now let’s inspect the performance of the same tree on the
<em>test</em> data:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print(titanic.pred.fft, data = "test", tree = 1)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">titanic.pred.fft</span>, data <span class="op">=</span> <span class="st">"test"</span>, tree <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="FFTrees_plot_files/figure-html/titanic-test-1.png" alt="**Figure 7**: Plotting the best FFT on _test_ data." width="580px"><p class="caption">
<strong>Figure 7</strong>: Plotting the best FFT on <em>test</em> data.
</p>
</div>
<p>We could have visualized the same tree by asking for
<code>plot(titanic.pred.fft, data = "test", tree = "best.test")</code>.
Note that the label of the bottom panel has now switched from “Accuracy
(Training)” to “Accuracy (Testing)”. Both the sensitivity and
specificity values have decreased somewhat, which is typical when using
a model (fitted on training data) for predicting new (test) data.</p>
<p>Let’s visualize the prediction performance of Tree #2, the most
liberal tree (i.e., with the highest sensitivity):</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">titanic.pred.fft</span>, data <span class="op">=</span> <span class="st">"test"</span>, tree <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="FFTrees_plot_files/figure-html/titanic-viz-2-1.png" alt="**Figure 8**: Plotting Tree #2." width="580px"><p class="caption">
<strong>Figure 8</strong>: Plotting Tree #2.
</p>
</div>
<p>This alternative tree has a better sensitivity (of 63%), but its
overall accuracy decreased to about baseline level (of 67%).</p>
<!-- Conclusion: Note that 2 types of trade-offs become transparent: -->
<p>Whereas comparing training with test performance illustrates the
trade-offs between mere fitting and genuine predictive modeling,
comparing the performance details of various FFTs illustrates the
typical trade-offs that any model for solving binary classification
problems engages in. Importantly, both types of trade-offs are rendered
transparent when using <strong>FFTrees</strong>.</p>
</div>
</div>
<div class="section level2">
<h2 id="vignettes">Vignettes<a class="anchor" aria-label="anchor" href="#vignettes"></a>
</h2>
<!-- Table of all vignettes: -->
<p>Here is a complete list of the vignettes available in the
<strong>FFTrees</strong> package:</p>
<table class="table">
<colgroup>
<col width="3%">
<col width="36%">
<col width="59%">
</colgroup>
<thead><tr class="header">
<th align="right"></th>
<th align="left">Vignette</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right"></td>
<td align="left"><a href="guide.html">Main guide: FFTrees
overview</a></td>
<td align="left">An overview of the <strong>FFTrees</strong>
package</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left"><a href="FFTrees_heart.html">Tutorial: FFTs for heart
disease</a></td>
<td align="left">An example of using <code><a href="../reference/FFTrees.html">FFTrees()</a></code> to model
heart disease diagnosis</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left"><a href="FFTrees_accuracy_statistics.html">Accuracy
statistics</a></td>
<td align="left">Definitions of accuracy statistics used throughout the
package</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left"><a href="FFTrees_function.html">Creating FFTs with
FFTrees()</a></td>
<td align="left">Details on the main <code><a href="../reference/FFTrees.html">FFTrees()</a></code>
function</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left"><a href="FFTrees_mytree.html">Manually specifying
FFTs</a></td>
<td align="left">How to directly create FFTs without using the built-in
algorithms</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="left"><a href="FFTrees_plot.html">Visualizing FFTs</a></td>
<td align="left">Plotting <code>FFTrees</code> objects, from full trees
to icon arrays</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="left"><a href="FFTrees_examples.html">Examples of
FFTs</a></td>
<td align="left">Examples of FFTs from different datasets contained in
the package</td>
</tr>
</tbody>
</table>
<!-- eof. -->
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nathaniel Phillips, Hansjoerg Neth, Jan Woike, Wolfgang Gaissmaier.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
